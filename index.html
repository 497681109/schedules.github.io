<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å“¥å“¥çš„ç­æ¬¡è¡¨</title>
    <style>
        /* ä¿æŒåŸæœ‰æ ·å¼ä¸å˜ */
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin: 20px;
        }

        label {
            display: inline-block;
            margin-bottom: 10px;
        }

        input[type="date"] {
            padding: 5px;
            margin-bottom: 20px;
        }

        #annual-shift-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 30px;
        }

        .month-table {
            border-collapse: collapse;
            margin: 10px;
            background: white;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }

        .month-table caption {
            font-weight: bold;
            padding: 10px;
            background: #f0f0f0;
            border-radius: 5px 5px 0 0;
        }

        .month-table th,
        .month-table td {
            border: 1px solid #ddd;
            padding: 12px;
            min-width: 50px;
            text-align: center;
            vertical-align: middle;
        }

        .month-table th {
            background: #f8f9fa;
        }

        .weekend {
            background-color: #EDF2FA;
        }

        .shift {
            font-size: 0.9em;
            color: #666;
            display: block;
            margin-top: 5px;
        }

        #shift-result {
            margin: 15px 0;
            font-size: 1.1em;
            color: #333;
        }
    </style>
</head>
<body>
   
    <h1>ç¦ç¦çš„å¥‹æ–—æ—¥å†</h1>
    <label for="date-picker">å¿«é€ŸæŸ¥è¯¢æ—¥æœŸï¼š</label>
    <input type="date" id="date-picker" min="2025-01-01" max="2035-12-31">
    <div id="shift-result"></div>
    <div id="annual-shift-container"></div>

    <script>
          const sweetSentences = [
            "å“¥å“¥ä»Šå¤©ä¹Ÿè¦å…ƒæ°”æ»¡æ»¡å“¦ï¼è®°å¾—æƒ³æˆ‘ï½ğŸ’•",
            "å“‡ï¼Œè¿™ä¸ªç­æ¬¡ä¸é”™å˜›ï¼ä¸‹ç­å¸¦å¥½åƒçš„å›æ¥å‘€ï½ğŸ˜‹",
            "è®¤çœŸå·¥ä½œçš„å“¥å“¥æœ€å¸…äº†ï¼ä»Šæ™šç»™ä½ æŒ‰æ‘©ğŸ’†â™‚ï¸",
            "å¤œç­è¦æ³¨æ„èº«ä½“å‘€ï¼Œä¸‹ç­äº†è¦åƒç‚¹å®µå¤œğŸ± ä¸èƒ½é¥¿è‚šå­å–”",
            "ä¼‘æ¯çš„æ—¥å­è¦å¥½å¥½ä¼‘æ¯å“¦ï½ğŸ›Œ",
            "æ—©ç­æ—¥å‡ºå¥½æµªæ¼«ï¼Œå¯æƒœä½ åªèƒ½çœ‹æœºå™¨å•¦ğŸŒ„",
            "è¿™ä¸ªç­è¡¨å®‰æ’æ·±å¾—æœ•å¿ƒï¼Œèµé¦™å»ä¸€ä¸ªğŸ˜˜",
            "ä¸Šç­ä¸è®¸çœ‹æ¼‚äº®å¦¹å¦¹ï¼ä¸‹ç­åªèƒ½çœ‹æˆ‘ğŸ‘€",
            "ä»Šå¤©åˆæ˜¯ä¸ºå°å®¶å¥‹æ–—çš„ä¸€å¤©å‘¢ï¼ŒåŠ æ²¹é¸­ï¼ğŸ¦†",
            "ç™½ç­è™½ç„¶è¾›è‹¦ï¼Œä½†æœ‰æˆ‘åœ¨ç­‰ä½ å›å®¶ğŸ ",
            `çŒœçŒœæ˜å¤©ä»€ä¹ˆæ—¥å­ï¼Ÿæ˜¯æˆ‘ä»¬ç›¸é‡çš„ç¬¬${Math.floor((new Date()-new Date('2020-05-20'))/86400000)}å¤©å‘€ï½`
        ];

        
        const shiftOrder = ['ä¼‘æ¯', 'ç™½ç­', 'å¤œç­', 'æ—©ç­'];
        const startYear = 2025;
        const baseDate = new Date('2025-01-01');

        // æ—¥æœŸé€‰æ‹©åŠŸèƒ½ï¼ˆæ”¯æŒåˆ°2035å¹´ï¼‰
        document.getElementById('date-picker').addEventListener('change', function() {
            const selectedDate = new Date(this.value);
            const diffDays = Math.floor((selectedDate - baseDate) / (1000 * 3600 * 24));
            const shiftIndex = (diffDays % shiftOrder.length + shiftOrder.length) % shiftOrder.length;
            const shift = shiftOrder[shiftIndex];

            // ç­›é€‰ç›¸å…³å¥å­
            const filtered = sweetSentences.filter(s => s.includes(shift));
            const available = filtered.length ? filtered : sweetSentences;
            const randomIndex = Math.floor(Math.random() * available.length);
            
            // å¤„ç†åŠ¨æ€å†…å®¹
            const daysSinceMeeting = Math.floor((new Date() - new Date('2020-05-20')) / 86400000);
            let dynamicSentence = available[randomIndex].replace(/\${days}/g, daysSinceMeeting);
            
            document.getElementById('shift-result').innerHTML = 
                `ğŸ“…${this.value} ç­æ¬¡ï¼š${shift}<br>ğŸ’Œ${dynamicSentence}`;
        });


        // ç”Ÿæˆ2025å¹´æ—¥å†ï¼ˆä¿æŒåŸæ ·ï¼‰
        function generateCalendar() {
    const container = document.getElementById('annual-shift-container');
    let overallDiffDays = 0; // æ–°å¢å˜é‡ç”¨äºè®°å½•ä»baseDateå¼€å§‹ç´¯è®¡çš„å¤©æ•°
    for (let month = 0; month < 12; month++) {
        const table = document.createElement('table');
        table.className ='month-table';

        const caption = table.createCaption();
        caption.textContent = new Date(startYear, month).toLocaleDateString('zh-CN', {
            year: 'numeric',
            month: 'long'
        });

        const headerRow = table.insertRow();
        ['æ—¥', 'ä¸€', 'äºŒ', 'ä¸‰', 'å››', 'äº”', 'å…­'].forEach(day => {
            const th = document.createElement('th');
            th.textContent = day;
            headerRow.appendChild(th);
        });

        const firstDay = new Date(startYear, month, 1);
        const lastDay = new Date(startYear, month + 1, 0);
        let currentDate = new Date(firstDay);

        let row = table.insertRow();

        for (let i = 0; i < firstDay.getDay(); i++) {
            row.insertCell();
        }

        while (currentDate <= lastDay) {
            if (row.cells.length === 7) {
                row = table.insertRow();
            }

            const cell = row.insertCell();
            const day = currentDate.getDate();

            // è¿™é‡Œä½¿ç”¨ç´¯è®¡çš„overallDiffDaysæ¥è®¡ç®—ç­æ¬¡
            const shiftIndex = overallDiffDays % shiftOrder.length; 
            const shift = shiftOrder[shiftIndex];

            if ([0, 6].includes(currentDate.getDay())) {
                cell.classList.add('weekend');
            }

            cell.innerHTML = `
                <div>${day}</div>
                <div class="shift">${shift}</div>
            `;

            currentDate.setDate(currentDate.getDate() + 1);
            overallDiffDays++; // æ¯æ¬¡å¾ªç¯é€’å¢å¤©æ•°
        }

        while (row.cells.length < 7) {
            row.insertCell();
        }

        container.appendChild(table);
    }
}

        generateCalendar();

         // é¡µé¢åŠ è½½åˆå§‹åŒ–
         window.addEventListener('DOMContentLoaded', () => {
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('date-picker').value = today;
            document.getElementById('date-picker').dispatchEvent(new Event('change'));
            generateCalendar();
        });
    </script>
</body>
</html>
